(function(){var t,e,r;r=require("request"),e=require("querystring"),t=function(){function t(t,e){this.credentials=t,this.shouldFormatResults=null!=e?e:!0,o=this.shouldFormatResults}var e,n,o;return o=null,n=function(t,e,n){var o,s,u;return o="",u="\r",t.oauth={callback:"/",consumer_key:e.consumer_key,consumer_secret:e.consumer_secret,token:e.token,token_secret:e.token_secret},s=r.post(t,function(t,e,r){return t?console.error(t):void 0}),s.on("data",function(t){var e,r,s;return o+=t.toString(),s=o.indexOf(u),e=-1!==s,e?(r=o.slice(0,s),n(JSON.parse(r)),o=o.slice(s+1)):void 0})},e=function(t){return o?{date:t.created_at,body:t.text,location:{geo:t.geo,coordinates:t.coordinates,place:t.place},"retweet-count":t.retweet_count,"favorited-count":t.favorite_count,lang:t.lang}:t},t.prototype.stream=function(t){var r;return r={uri:"https://stream.twitter.com/1.1/statuses/filter.json?track=twitter"},n(r,this.credentials,function(r){return t(e(r))})},t}(),module.exports=t}).call(this);